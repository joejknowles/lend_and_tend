%div.container.profile_container
  %div.row
    %div.col-sm-4
      %div.profile_pic_container
        - if @user.user_avatar
          = image_tag @user.user_avatar.image.url(:medium), class: 'profile_photo'
          -if @user == current_user
            = link_to 'Remove photo', user_avatar_path(@user.user_avatar), method: :delete
        - else
          %img.profile_photo{ src: 'http://placehold.it/250x250' }
        -unless current_user == @user
          %div.message_user_btn
            =button_to 'Match? Get in touch!', new_user_user_email_path(@user), method: :get, class: ['btn','btn-warning']
    %div.col-sm-8
      %h1.user_profile_header= @user.name
      - if current_user == @user
        %p= button_to 'Add to my profile', users_edit_profile_path, method: :get, class: ['btn', 'btn-warning']
      %h3 Lender

      - if @user.about_me?
        %p= @user.about_me
      -elsif current_user == @user
        %span.label.label-warning Fill me in
        %p.lead= 'Your profile is currently empty so nobody knows anything about you. To help keep Lend & Tend nice please take a moment to add to your profile!'
      -else
        %p.lead= 'This user is yet to add a bio.'
      %h3
        Space available:

      - if @user.patches.any?
        - @user.patches.each do | patch |

          %div.panel.panel-default
            %div.panel-heading
              %h4= patch.patch_type
            %div.panel-body
              %div.col-xs-6
                - if patch.patch_images.first
                  = image_tag patch.patch_images.first.image.url(:medium)
                -else
                  %img{ src: 'http://placehold.it/250x250' }
              %div.col-xs-6
              %h5.garden_headers About
              %p= patch.description
            %div.panel-footer
              %div.col-xs-6
                %h5.garden_headers How long for?
                %span= "Upto #{pluralize(patch.duration, 'year')}"
              %div.col-xs-6
              %h5.garden_headers Where is this cool patch?
              %span= patch.location

      -elsif current_user == @user
        %p
          You are not offering any patches yet, fancy helping someone local enjoy the outside, and meeting a new friend?
          =link_to 'Click here to add one', new_patch_path
        %p Or not sure whether its a good idea yet? Read more about other users that have lended here.
      -else
        This user has no patches to share right now.
  - if current_user == @user
    = link_to 'delete my account', user_registration_path, method: :delete
